CREATE DATABASE gamesdb;
USE gamesdb;

CREATE TABLE pais (
    pais_nombre VARCHAR(20) PRIMARY KEY NOT NULL,
    pais_codigo VARCHAR(10) NOT NULL
);

INSERT INTO pais (pais_nombre, pais_codigo) VALUES
('GUATEMALA', 'GT'),
('HONDURAS', 'HN'),
('NICARAGUA', 'NI'),
('COSTARICA', 'CR');


CREATE TABLE categoria(
	categoria_nombre VARCHAR(50) NOT NULL,
    id  INTEGER NOT NULL AUTO_INCREMENT PRIMARY KEY
);

CREATE TABLE admin_sistema (
    admin_nombre VARCHAR(100) NOT NULL,
    admin_correo VARCHAR(100) NOT NULL PRIMARY KEY,
    admin_contraseña VARCHAR(100) NOT NULL,
    admin_avatar MEDIUMBLOB
);

CREATE TABLE empresa (
    em_codigo INT AUTO_INCREMENT PRIMARY KEY,
    em_nombre VARCHAR(100) NOT NULL,
    em_visibilidad_comentarios BOOLEAN DEFAULT TRUE,
    em_porcentaje_comision INT NOT NULL
);

CREATE TABLE admin_empresa (
    admin_nombre VARCHAR(100) NOT NULL,
    admin_correo VARCHAR(100) NOT NULL PRIMARY KEY,
    admin_contraseña VARCHAR(100) NOT NULL,
    admin_fecha_nacimiento DATE NOT NULL,
    codigo_empresa INT NOT NULL,
    avatar MEDIUMBLOB,
    CONSTRAINT fk_admin_empresa_entidad FOREIGN KEY (codigo_empresa) REFERENCES empresa (em_codigo)
);

CREATE TABLE gamer(
    gamer_nombre VARCHAR(100) NOT NULL,
    nickname VARCHAR(50) NOT NULL,
    gamer_correo VARCHAR(100) NOT NULL,
    gamer_contraseña VARCHAR(100) NOT NULL,
    gamer_edad INTEGER NOT NULL,
    gamer_fecha_nacimiento DATE NOT NULL,
    nombre_pais VARCHAR(20) NOT NULL,
    gamer_telefono CHAR(8) NOT NULL,
    avatar MEDIUMBLOB,
    CONSTRAINT pk_gamer PRIMARY KEY (gamer_correo, nickname),
    CONSTRAINT fk_gamer FOREIGN KEY (nombre_pais) REFERENCES pais (pais_nombre)
);

INSERT INTO empresa (em_nombre, em_visibilidad_comentarios, em_porcentaje_comision)
VALUES ('Bug games', true, 12);

INSERT INTO admin_sistema(admin_nombre, admin_correo, admin_contraseña)
VALUES ('Primer admin','admin1@gmail.com','12345');

INSERT INTO admin_empresa (admin_nombre, admin_correo, admin_contraseña, admin_fecha_nacimiento, codigo_empresa, avatar)
VALUES ('AdminEmpresa1', 'roberto@epicgames.com', '12345', '1990-03-25', 1, NULL);





