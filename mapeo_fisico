CREATE DATABASE gamesdb;
USE gamesdb;

CREATE TABLE pais (
    pais_nombre VARCHAR(20) PRIMARY KEY NOT NULL,
    pais_codigo VARCHAR(10) NOT NULL
);


CREATE TABLE tabla_configuracion (
    porcentaje_comision INTEGER NOT NULL,
    id INTEGER NOT NULL AUTO_INCREMENT PRIMARY KEY
);

CREATE TABLE empresa (
    nombre_empresa VARCHAR(40) NOT NULL,
    id_empresa INTEGER NOT NULL AUTO_INCREMENT PRIMARY KEY,
    permite_comentarios BOOLEAN NOT NULL,
    empresa_avatar MEDIUMBLOB
);

CREATE TABLE negociacion_empresa (
    id_empresa INTEGER PRIMARY KEY NOT NULL,
    porcentaje_comision INTEGER NOT NULL,
    CONSTRAINT fk_empresa_nombre FOREIGN KEY (id_empresa) REFERENCES empresa (id_empresa) ON DELETE CASCADE
);



INSERT INTO tabla_configuracion(porcentaje_comision) VALUES ('15');

INSERT INTO pais (pais_nombre, pais_codigo) VALUES
('GUATEMALA', 'GT'),
('HONDURAS', 'HN'),
('NICARAGUA', 'NI'),
('COSTARICA', 'CR');


CREATE TABLE categoria(
	categoria_nombre VARCHAR(50) NOT NULL,
    id  INTEGER NOT NULL AUTO_INCREMENT PRIMARY KEY
);

CREATE TABLE admin_sistema (
    admin_nombre VARCHAR(100) NOT NULL,
    admin_correo VARCHAR(100) NOT NULL PRIMARY KEY,
    admin_contrase単a VARCHAR(100) NOT NULL,
    admin_avatar MEDIUMBLOB
);


CREATE TABLE admin_empresa (
    admin_nombre VARCHAR(100) NOT NULL,
    admin_correo VARCHAR(100) NOT NULL PRIMARY KEY,
    admin_contrase単a VARCHAR(100) NOT NULL,
    admin_fecha_nacimiento DATE NOT NULL,
    id_empresa INTEGER NOT NULL,
    avatar_empresa MEDIUMBLOB,
    CONSTRAINT fk_admin_empresa FOREIGN KEY (id_empresa) REFERENCES empresa (id_empresa) ON DELETE CASCADE
);

CREATE TABLE gamer(
    gamer_nombre VARCHAR(100) NOT NULL,
    nickname VARCHAR(50) NOT NULL,
    gamer_correo VARCHAR(100) NOT NULL,
    gamer_contrase単a VARCHAR(100) NOT NULL,
    gamer_edad INTEGER NOT NULL,
    gamer_fecha_nacimiento DATE NOT NULL,
    nombre_pais VARCHAR(20) NOT NULL,
    gamer_telefono CHAR(8) NOT NULL,
    avatar MEDIUMBLOB,
    CONSTRAINT pk_gamer PRIMARY KEY (gamer_correo, nickname),
    CONSTRAINT fk_gamer FOREIGN KEY (nombre_pais) REFERENCES pais (pais_nombre)
);


INSERT INTO admin_sistema(admin_nombre, admin_correo, admin_contrase単a)
VALUES ('Primer admin','admin1@gmail.com','12345');





