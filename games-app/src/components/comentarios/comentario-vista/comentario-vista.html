<div class="card mb-3 border-0 shadow-sm" style="border-radius: 15px; background-color: #f8f9fa;">
  <div class="card-body p-3" [formGroup]="formulario">
    <div class="d-flex justify-content-between align-items-center mb-2">
      <div class="d-flex align-items-center">
        <div class="rounded-circle bg-primary text-white d-flex align-items-center justify-content-center me-2"
          style="width: 35px; height: 35px; font-weight: bold;">
          @
        </div>
        <strong class="text-primary">{{ comentario.nickname }}</strong>
      </div>
      <small class="text-muted">
        <i class="bi bi-clock me-1"></i>{{ comentario.fecha }}
      </small>
      @if(yaEstaComprado){
      <i class="bi bi-reply" (click)="habilitarCampoRespuesta()"></i>
      }


      @if(quiereComentar){
      <div class="form-outline mb-3">
        <textarea class="form-control" placeholder="Escribe algo " formControlName="texto" rows="3"
          style="border-radius: 0.5rem;"></textarea>
      </div>
      <div class="d-flex justify-content-end mb-4">
        <button type="button" (click)="enviarComentario()" [disabled]="formulario.invalid"  class="btn btn-primary px-4">
          Enviar
        </button>

        <button type="button" (click)="cancelarComentario()" class="btn btn-secondary px-4">
          Cancelar
        </button>
      </div>
      }

    </div>

    <div class="ps-1">
      <p class="card-text text-dark" style="white-space: pre-wrap;">{{ comentario.texto }}</p>

    </div>
  </div>
</div>

<div class="respuestas-container mb-4">
  @for(sub of listaSubcomentarios; track sub.idSubcomentario){
  <app-subcomentario-vista [subcomentario]="sub"></app-subcomentario-vista>
  }
</div>